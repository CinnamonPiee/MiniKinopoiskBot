# MiniKinopoisk

## Описание

Телеграмм бот для поиска фильмов и сериалов, мини аналог сайта Кинопоиск.\
Стек: aiogram, SQLAlchemy, FastAPI, PostgreSQL, alembic, asyncio

## Установка

Следуйте инструкциям ниже для установки и запуска бота в телеграм.

### Шаги установки

1. Клонируйте репозиторий

    ```bash
    git clone https://github.com/KellTuz/MiniKinopoiskBot.git
    cd MiniKinopoiskBot
    ```

2. Создайте и активируйте виртуальное окружение

   - Windows
        ```bash
        python -m venv venv
        venv\Scripts\activate
        ```

   - Linux and MacOS
        ```bash
        python3 -m venv venv
        source venv/bin/activate
        ```

3. Установите зависимости

    ```bash
    pip install -r requirements.txt
    ```
4. Создайте файл .env в корневой директории (смотрите пример из файла .env.template)
    - 4.1\
    Данный бот использует СУБД PostgreSQL. Данное СУБД вы можете скачать по ссылке https://www.postgresql.org/. Далее вам необходимо создать БД. Введите данные которые вы указывали при создании БД в файл .env:\
    \
    DB_HOST(стандартно localhost или 127.0.0.1)\
    DB_PORT(стандартно 5432)\
    DB_USER(стандартно postgres)\
    DB_PASS(пароль который вы указали при установке PostgreSQL)\
    DB_NAME(имя БД которую вы создали)\
    \
    Далее в командной строке выполните миграции с помощью команд:

        ```bash
        alembic init migrations
        alembic revision --autogenerate
        alembic upgrade head
        ```
    - 4.2\
    Получите персональный токен в телеграм у BotFather и поместите его\
    в файл .env

    - 4.3\
    Получите персональный токен API https://api.kinopoisk.dev и так же поместите его в файл .env

    - 4.4\
    Поместите абсолютный путь к фото из папки /img/not-found-image-15383864787lu.jpg в файл .env

5. Перейдите по ссылке https://github.com/CinnamonPiee/CheckCreatePasswordAPI, установите и запустите следуя инструкциям (необходимо для безопасной регистрации и аутентификации пользователя в боте). Установить API необходимо в любой директории кроме директории бота. Данное API должно быть запущено перед запуском бота и необходимо что бы оно работало все время работы бота.

6. Запустите бота командой

    - Windows
         ```bash
         cd MiniKinopoiskBot
         python main.py
         ```
   
    - Linux and MacOS
        ```bash
        cd MiniKinopoiskBot
        python3 main.py
        ```
      
## Возможности бота
1. В боте присутствует регистрация (необходимо ввести: имя, почту и номер телефона и пароль). Бот использует алгоритм PBKDF2 с хешем SHA256 для паролей.
Она делается единожды и в дальнейшем больше не потребуется.
2. Основной функционал находиться в кнопке "Фильмы / Сериалы":
    * Найти фильм / сериал - находит фильм или сериал по названию.
    * Рандомный фильм / сериал - выдаёт рандомный фильм или сериал. Так же можно ввести некоторые критерии.
    * Кастомный поиск - выдает фильм или сериал по большим настройкам поиска.
3. В боте присутствует история поиска фильмов или сериалов.

### Развитие бота (будущее)
1. Удаление фильма или сериала из истории поиска
2. Галочка в истории фильма или сериала о просмотре
3. Добавление более подробного описания характеристик фильма или сериала
4. Автоматическое удаление непонятных фильмов (к сожалению такие есть, может найтись фильм без названия, хотя все остальное у него присутствует)
5. Красивый вывод текста (возможно добавление цвета)
6. Мини викторина по знанию фильмов по постеру или описанию
7. Переделать все виды машин состояний и по возможности все reply клавиатуры на inline
8. Подключить web версию (для этого выучить надо frontend)
9. Создать приложение (в мечтах)
10. Продать проект
11. Добавить вкладку с будущими фильмами
12. Сделать рассылки с вышедшими фильмами
13. Добавление мультфильмов
14. Добавить восстановление пароля через почту